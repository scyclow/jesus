<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>The Church of Subway Jesus Pamphlets</title>

  <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico">

  <meta name="description" content="Welcome to The Church of Subway jesus Pamphlets">
  <meta name="keywords" content="subway jesus pamphlets, subway, jesus, pamphlets, art, crypto, cryptocurrency, nft, eth, ethereum, steve, pikelny, steve pikelny, steviep">

  <meta name="twitter:image" content="https://steviep.xyz/jesus/promo/banner.jpg">
  <meta name="twitter:image:alt" content="The Church of Subway Jesus Pamphlets">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:creator" content="@steviepxyz">
  <meta name="twitter:site" content="@steviepxyz">
  <meta property="twitter:description" content="Welcome to The Church of Subway jesus Pamphlets">

  <meta name="og:image" property="og:image" content="https://steviep.xyz/jesus/promo/banner.jpg">
  <meta name="og:image:alt" content="The Church of Subway Jesus Pamphlets">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://steviep.xyz/jesus">
  <meta property="og:title" content="The Church of Subway Jesus Pamphlets">
  <meta property="og:site_name" content="The Church of Subway Jesus Pamphlets">
  <meta property="og:description" content="Welcome to The Church of Subway jesus Pamphlets">


  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Merienda:wght@700&display=swap" rel="stylesheet">

  <style type="text/css">
    * {
      margin: 0;
      padding: 0;
      font-family: 'Merienda', cursive;
    }
    body {
      background-image: url(./tan.jpeg);
      margin: 0.5em;
    }

    h1 {
      color: #8a3d08;
      text-align: center;
      background-color: #fff;
      border:  2px solid;
      padding: 0.25em;
      width: 525px;
      margin: auto;
      border-radius: 15px;
    }

    h3 {
      margin: 0.5em 0;
    }
    .title {
      padding: 1em;
      margin-bottom: 0.75em;

      text-decoration: none;
      color: #8a3d08;
    }



    .menu {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      max-width: 1200px;
      margin: auto;
    }

    .menu-item {
      color: #8a3d08;
      text-align: center;
      background-color: #fff;
      border:  2px solid;
      border-radius: 15px;
      padding: 1em;
      margin: 1em;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      align-self: center;
      justify-self: center;

      max-width: 10em;
    }

    .menu-item img {
      max-width: 100%;
      margin-bottom: 1em;
    }

    #main {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      grid-column-gap: 1.5em;
      grid-row-gap: 2em;
      max-width: 1200px;
      margin: auto;
      justify-items: center;
    }

    .pamphlet {
      width: 350px;
      height: 700px;
      color: #8a3d08;
      text-align: center;
      background-color: #fff;
      border:  2px solid;
      border-radius: 15px;
      padding: 1em;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-around;
      align-self: center;
      justify-self: center;
    }

    .pamphlet img {
      width: 100%;
    }

    select {
      cursor: pointer;
    }


    dl div {
      margin-bottom: 0.5em;
    }

    dl {
      width: 300px;
      margin: auto;
      margin-bottom: 3em;
    }

    dt, dd {
      display: inline-block;
    }

    dt {
      width: 100px;
    }

    dd {
      width: 180px;
    }

    dd select {
      width: 180px;
    }

    .claimable {
      position: absolute;
      background-color: #e31e66;
      border-radius: 50%;
      width: 2em;
      height: 2em;
      margin: 0.5em;
    }


    @media (max-width: 565px) {}
  </style>
</head>
<body>

  <a class="title" href="./home.html"><h1>The Church of Subway Jesus Pamphlets</h1></a>


  <dl id="filterer">
    <div>
      <dt>Year:</dt>
      <dd>
        <select id="year-select">
          <option value="all">All</option>
          <option value="2021">2021</option>
          <option value="2022">2022</option>
          <option value="2023">2023</option>
          <option value="2024">2024</option>
        </select>
      </dd>
    </div>

    <div>
      <dt>Publisher:</dt>
      <dd>
        <select id="publisher-select"> </select>
      </dd>
    </div>

    <div>
      <dt>Type:</dt>
      <dd>
        <select id="type-select"> </select>
      </dd>
    </div>

    <div>
      <dt>Content:</dt>
      <dd>
        <select id="content-select"> </select>
      </dd>
    </div>

    <div>
      <dt>Condition:</dt>
      <dd>
        <select id="condition-select">
          <option value="all">All</option>
          <option value="Mint">Mint</option>
          <option value="Very Good">Very Good</option>
          <option value="Good">Good</option>
          <option value="Okay">Okay</option>
          <option value="Poor">Poor</option>
          <option value="Terrible">Terrible</option>
        </select>
      </dd>
    </div>
  </dl>

  <main id="main">

  </main>

  <footer style="padding: 1em; text-align: center; margin: 5em 0;">Website by <a href="https://steviep.xyz">steviep (2022)</a></footer>


</body>

<script src="./pamphletData.js"></script>

<script type="text/javascript">

  let filterYear = 'all'
  let filterPublisher = 'all'
  let filterType = 'all'
  let filterContent = 'all'
  let filterCondition = 'all'
  let giftsOnly = false

  const yearSelect = document.getElementById('year-select')
  const publisherSelect = document.getElementById('publisher-select')
  const typeSelect = document.getElementById('type-select')
  const contentSelect = document.getElementById('content-select')
  const conditionSelect = document.getElementById('condition-select')

  const urlParams = new URLSearchParams(window.location.search)

  for (let [param, value] of urlParams) {
    console.log(param, value)
    if (param === 'year'){
      filterYear = value
      yearSelect.value = value
    }
    if (param === 'publisher') {
      filterPublisher = value
      setTimeout(() => {
        publisherSelect.value = value
      })
    }
    if (param === 'type') {
      filterType = value
      setTimeout(() => {
        typeSelect.value = value
      })
    }
    if (param === 'content') {
      filterContent = value
      setTimeout(() => {
        contentSelect.value = value
      })
    }
    if (param === 'condition') {
      filterCondition = value
      setTimeout(() => {
        conditionSelect.value = value
      })
    }
    if (param === 'gifts' && value === 'true') {
      giftsOnly = true
    }
  }


  const claimable = [
    '91',
    // '112',
    // '128',
    // '157',
    // '169',
    '174',
    // '175',
    // '176',
    '177',
    // '178',
    // '179',
    // '180',
    // '181',
    // '182',
    // '183',
    // '184',
    '185',
    '186',
    // '187',
    // '188',
    // '189',
    '190',
    '191',
    '192',
    '193',
    '194',
    '195',
    // '196',
    '197',
    // '198',
    // '199',
    '200',
    // '201',
    // '202',
    '203',
    // '204',
    // '205',
    '206',
    // '207',
    '208',
    // '209',
    // '210',
    '211',
    '212',
    // '213',
    '214',
    // '215',
    // '216',
    // '217',
    '218',
    '219',
    '220',
    // '221',
    // '222',
    '223',
    // '224',
  ]


  function renderPamphlets() {
    document.getElementById('main').innerHTML = `
      ${
        pamphletData
        .filter(d => {
          const year = d.attributes.find(a => a.trait_type === 'Year').value
          const publisher = d.attributes.find(a => a.trait_type === 'Publisher').value
          const _type = d.attributes.find(a => a.trait_type === 'Type').value
          const content = d.attributes.find(a => a.trait_type === 'Content').value
          const condition = d.attributes.find(a => a.trait_type === 'Condition').value

          return (
            (filterYear === 'all' || year === filterYear) &&
            (filterPublisher === 'all' || publisher === filterPublisher) &&
            (filterType === 'all' || _type === filterType) &&
            (filterContent === 'all' || content === filterContent) &&
            (filterCondition === 'all' || condition === filterCondition) &&
            (!giftsOnly || claimable.includes(d.token_id))
          )
        })
        .map(d => `
          <div class="pamphlet">
            <a href="./assets/${d.token_id}.jpg">
              ${claimable.includes(d.token_id) && giftsOnly ? `<div class="claimable"></div>` : ''}
              <img src="./assets/${d.token_id}.jpg">
            </a>
            <div>
              <h3>${d.name}</h3>
              <div># ${d.token_id}</div>
              <div>Year: ${d.attributes.find(a => a.trait_type === 'Year').value}</div>
              <div>Publisher: ${d.attributes.find(a => a.trait_type === 'Publisher').value}</div>
              <div>Type: ${d.attributes.find(a => a.trait_type === 'Type').value}</div>
              <div>Content: ${d.attributes.find(a => a.trait_type === 'Content').value}</div>
              <div>Condition: ${d.attributes.find(a => a.trait_type === 'Condition').value}</div>
              <div><a href="https://opensea.io/assets/ethereum/0x4f9e2e709895cc8ae62be86c6289f7081ba048a6/${d.token_id}" target="_blank">Open Sea</a></div>
            </div>
          </div>
        `).join('\n')
      }
    `
  }

  renderPamphlets()



  publisherSelect.innerHTML = `
    <option value="all">All</option>
    ${
    Array
      .from(new Set(pamphletData.map(d => d.attributes.find(a => a.trait_type === 'Publisher').value)))
      .map(val => `<option value="${val}">${val}</option>`)
      .sort()
  }`

  typeSelect.innerHTML = `
    <option value="all">All</option>
    ${
    Array
      .from(new Set(pamphletData.map(d => d.attributes.find(a => a.trait_type === 'Type').value)))
      .map(val => `<option value="${val}">${val}</option>`)
      .sort()
  }`
  contentSelect.innerHTML = `
    <option value="all">All</option>
    ${
    Array
      .from(new Set(pamphletData.map(d => d.attributes.find(a => a.trait_type === 'Content').value)))
      .map(val => `<option value="${val}">${val}</option>`)
      .sort()
  }`


  yearSelect.onchange = e => {
    filterYear = e.target.value
    urlParams.set('year', e.target.value)
    window.location.search = urlParams.toString()
    // renderPamphlets()
  }

  publisherSelect.onchange = e => {
    filterPublisher = e.target.value
    urlParams.set('publisher', e.target.value)
    window.location.search = urlParams.toString()
    // renderPamphlets()
  }

  typeSelect.onchange = e => {
    filterType = e.target.value
    urlParams.set('type', e.target.value)
    window.location.search = urlParams.toString()
    // renderPamphlets()
  }

  contentSelect.onchange = e => {
    filterContent = e.target.value
    urlParams.set('content', e.target.value)
    window.location.search = urlParams.toString()
    // renderPamphlets()
  }

  conditionSelect.onchange = e => {
    filterCondition = e.target.value
    urlParams.set('condition', e.target.value)
    window.location.search = urlParams.toString()
    // renderPamphlets()
  }


</script>
</html>